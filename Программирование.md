# Программирование

Для создания программ используется собственный ассемблер. Любая прогрмма использует регистры A, B, C, D, а так же некоторые из флагов Z, S, C, O.
+ Флаг Z: устанавливается, если результат вычисления равен нулю.
+ Флас S: устанавливается, если старший бит в результате вычисления равен 1. Это нужно для представления бинарных чисел как знаковых.
+ Флаг С: устанавливается, если в результате вычисления было взаимодействие с девятым битом, которого в восьмибитных регистрах нет. Он нужен для вычисления N-битных чисел. <br>
> Пример: 
> + 10000000+10000000=***1***00000000
> + ***1***00000000-00000001=***0***11111111
+ Флаг 0: устанавливается, если в результате вычисления двух чисел, старший бит которых равен, полученное число будет иметь другой старший бит. Это значит, что при знаковом вычислении ответ вышел за предел допустимых битов и изменил знак. <br>
> Пример:
> + ***0***1000000+***0***1000001=***1***0000001

## Команды ассемблера
|Команда|Описание|Воздействие на флаги|
|-------|--------|:------------------:|
||***Команды передачи данных***|
|**MOV X; Y**|Копирует данные из регистра Y в регистр X.|-|
|**LD X**|Читает из RAM в регистр X, используя следующий байт в RAM как адрес.|-|
|**LD X; Y**|Читает из RAM в регистр X, используя регистр Y как адрес.|-|
|**LDI X**|Читает из RAM следующий байт непосредственно в регистр X.|-|
|**ST X**|Пишет в RAM из регистра X, используя следующий байт в RAM как адрес.|-|
|**ST X; Y**|Пишет в RAM из регистра X, используя регистр Y как адрес.|-|
|**RND X**|Генерирует случайный байт и кладёт в регистр X.|-|
||***Команды ввода-вывода***|
|**IN X**|Ввод из порта в регистр X.|-|
|**OUT X; Y**|Вывод из регистра X и Y шестнадцатибитного значения. Младшей частью будет значение регистра X.|-|
|**OUT X**|Вывод из регистра X восьмибитного значения.|-|
||***Команды целочисленной арифметики***|
|**ADD X; Y**|Сложение между регистрами X и Y, результат в X.|C, O, Z, S|
|**ADC X; Y**|Сложение между регистрами X и Y, результат в X. Если есть флаг C, то дополнительно прибавляет 1.|C, O, Z, S|
|**INC X**|Добавление числу в регистре X 1.|Z, S|
|**SUB X; Y**|Вычитает из числа в регистре X число в регистре Y.|C, O, Z, S|
|**SBB X; Y**|Вычитает из числа в регистре X число в регистре Y. Если есть флаг C, то дополнительно вычитает 1.|C, O, Z, S|
|**DEC X**|Вычитение из числа в регистре X 1.|Z, S|
|**NEG X**|Замена старшего бита в регистре X на противоположный.|Z, S|
||***Команды логических операций***|
|**AND X; Y**|Побитовое И между числами регистров X и Y, результат в X.|Z, S|
|**OR X; Y**|Побитовое ИЛИ между числами регистров X и Y, результат в X.|Z, S|
|**XOR X; Y**|Побитовое исключающее ИЛИ между числами регистров X и Y, результат в X.|Z, S|
|**NOT X**|Инвертирует каждый бит в регистре X на противоположный.|Z, S|
|**CLR X**|Очистка регистра X. S устанавливается 0, Z устанавливается 1.|Z, S|
||***Cдвиговые команды***|
|**SHR X**|Сдвигает каждый бит в регистре X вправо. Младший бит переходит во флаг C, страший становится 0.|C, Z, S|
|**SAR X**|Сдвигает каждый бит в регистре X вправо. Младший бит переходит во флаг C, старший не меняется.|C, Z, S|
|**RCR X**|Сдвигает каждый бит в регистре X вправо. Младший бит переходит во флаг C, в старший переходит значение флага C.|C, Z, S|
|**ROR X**|Сдвигает каждый бит в регистре X вправо. Младший бит переходит во флаг C и старший бит.|С, Z, S|
|**SHL X**|Сдвигает каждый бит в регистре X влево. Старший бит переходит во флаг C, младший становится 0.|C, Z, S|
|**RCL X**|Сдвигает каждый бит в регистре X влево. Старший бит переходит во флаг C, в младший переходит значение флага C.|C, Z, S|
|**ROL X**|Сдвигает каждый бит в регистре X влево. Старший бит переходит во флаг C и младший бит.|C, Z, S|
|**SWAP X**|Обмен тетрадами (полубайты/нибблы) в регистре X.|-|
||***Управление флагами***|
|**CMC**|Инвертирует флаг C.|C|
||***Команды безусловных переходов***|
|**JMP**|Переход, используя следущий байт в RAM как адрес.|-|
|**JMP X**|Переход, используя регистр X как адрес.|-|
||***Команды условных переходов***|
|**JF**|Переход, используя следущий байт в RAM как адрес, если активен флаг F.|-|
|**JF X**|Переход, используя регистр X как адрес, если активен флаг F.|-|
|**JNF**|Переход, используя следующий байт в RAM как адрес, если не активен флаг F.|-|
|**JNF X**|Переход, используя регистр X как адрес, если не активен флаг F.|-|

Регистры A, B, C, D представлены как X, Y. <br>
Флаги C, S, Z, O представлены как F.

## Коды команд

 |Оп.\YYXX|0000|0001|0010|0011|0100|0101|0110|0111|1000|1001|1010|1011|1100|1101|1110|1111|
 |----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|----|
 |0000|LD <br> A|MOV <br> A; B|MOV <br> A; C|MOV <br> A; D|MOV <br> B; A|LD <br> B|MOV <br> B; C|MOV <br> B; D|MOV <br> C; A|MOV <br> C; B|LD C|MOV <br> C; D|MOV <br> D; A|MOV <br> D; B|MOV <br> D; C|LD <br> D|
 |0001|RND <br> A|LD <br> A; B|LD <br> A; C|LD <br> A; D|LD <br> B; A|RND <br> B|LD <br> B; C|LD <br> B; D|LD <br> C; A|LD <br> C; B|RND <br> C|LD <br> C; D|LD <br> D; A|LD <br> D; B|LD <br> D; C|RND <br> D|
 |0010|ST <br> A|ST <br> A; B|ST <br> A; B|ST <br> A; C|ST <br> A; D|ST <br> B; A|ST <br> B|ST <br> B; C|ST <br> B; D|ST <br> C; A|ST <br> C; B|ST <br> C|ST <br> C; D|ST <br> D; A|ST <br> D; B|ST <br> D; C|ST <br> D|
 |0011|LDI <br> A|ADD <br> A; B|ADD <br> A; C|ADD <br> A; D|ADD <br> B; A|LDI <br> B|ADD <br> B; C|ADD <br> B; D|ADD <br> C; A|ADD <br> C; B|LDI <br> C|ADD <br> C; D|ADD <br> D; A|ADD <br> D; B|ADD <br> D; C|LDI <br> D|
 |0100|JMP <br> A|JMP <br> B|JMP <br> C|JMP <br> D|JС|JS|JZ|JO|JNC|JNS|JNZ|JNO|NOP|JMP|HLT|CMC|
 |0101|JC <br> A|JC <br> B|JC <br> C|JC <br> D|JS <br> A|JS <br> B|JS <br> C|JS <br> D|JZ <br> A|JZ <br> B|JZ <br> C|JZ <br> D|JO <br> A|JO <br> B|JO <br> C|JO <br> D|
 |0110|JNC <br> A|JNC <br> B|JNC <br> C|JNC <br> D|JNS <br> A|JNS <br> B|JNS <br> C|JNS <br> D|JNZ <br> A|JNZ <br> B|JNZ <br> C|JNZ <br> D|JNO <br> A|JNO <br> B|JNO <br> C|JNO <br> D|
 |0111|INC <br> A|ADC <br> A; B|ADC <br> A; C|ADC <br> A; D|ADC <br> B; A|INC <br> B|ADC <br> B; C|ADC <br> B; D|ADC <br> C; A|ADC <br> C; B|INC <br> C|ADC <br> C; D|ADC <br> D; A|ADC <br> D; B|ADC <br> D; C|INC <br> D|
 |1000|OUT <br> A|OUT <br> A; B|OUT <br> A; C|OUT <br> A; D|OUT <br> B; A|OUT <br> B|OUT <br> B; C|OUT <br> B; D|OUT <br> C; A|OUT <br> C; B|OUT <br> C|OUT <br> C; D|OUT <br> D; A|OUT <br> D; B|OUT <br> D; C|OUT <br> D|
 |1001|IN <br> A|AND <br> A; B|AND <br> A; C|AND <br> A; D|AND <br> B; A|IN <br> B|AND <br> B; C|AND <br> B; D|AND <br> C; A|AND <br> C; B|IN <br> C|AND <br> C; D|AND <br> D; A|AND <br> D; B|AND <br> D; C|IN <br> D|
 |1010|DEC <br> A|SUB <br> A; B|SUB <br> A; C|SUB <br> A; D|SUB <br> B; A|DEC <br> B|SUB <br> B; C|SUB <br> B; D|SUB <br> C; A|SUB <br> C; B|DEC <br> C|SUB <br> C; D|SUB <br> D; A|SUB <br> D; B|SUB <br> D; C|DEC <br> D|
 |1011|NEG <br> A|SBB <br> A; B|SBB <br> A; C|SBB <br> A; D|SBB <br> B; A|NEG <br> B|SBB <br> B; C|SBB <br> B; D|SBB <br> C; A|SBB <br> C; B|NEG <br> C|SBB <br> C; D|SBB <br> D; A|SBB <br> D; B|SBB <br> D; C|NEG <br> D|
 |1100|NOT <br> A|OR <br> A; B|OR <br> A; C|OR <br> A; D|OR <br> B; A|NOT <br> B|OR <br> B; C|OR <br> B; D|OR <br> C; A|OR <br> C; B|NOT <br> C|OR <br> C; D|OR <br> D; A|OR <br> D; B|OR <br> D; C|NOT <br> D|
 |1101|SHR <br> A|SHR <br> B|SHR <br> C|SHR <br> D|SAR <br> A|SAR <br> B|SAR <br> C|SAR <br> D|RCR <br> A|RCR <br> B|RCR <br> C|RCR <br> D|ROR <br> A|ROR <br> B|ROR <br> C|ROR <br> D|
 |1110|SHL <br> A|SHL <br> B|SHL <br> C|SHL <br> D|RCL <br> A|RCL <br> B|RCL <br> C|RCL <br> D|ROL <br> A|ROL <br> B|ROL <br> C|ROL <br> D|SWAP <br> A|SWAP <br> B|SWAP <br> C|SWAP <br> D|
 |1111|CLR <br> A|XOR <br> A; B|XOR <br> A; C|XOR <br> A; D|XOR <br> B; A|CLR <br> B|XOR <br> B; C|XOR <br> B; D|XOR <br> C; A|XOR <br> C; B|CLR <br> C|XOR <br> C; D|XOR <br> D; A|XOR <br> D; B|XOR <br> D; C|CLR <br> D|

 Для получения кода нужно использовать значение левого столбца как левую половину, а верхних столбцов как правую половину.
